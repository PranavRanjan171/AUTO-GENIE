import { useState } from "react";
import { useParams, useNavigate, BrowserRouter, Routes, Route, useLocation } from "react-router-dom";
import { createRoot } from "react-dom/client";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { Toaster } from "@/components/ui/toaster";
import { Toaster as Sonner } from "@/components/ui/sonner";
import { TooltipProvider } from "@/components/ui/tooltip";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Card } from "@/components/ui/card";
import { Search, Car as CarIcon, Fuel, Settings, ArrowLeft } from "lucide-react";

// ==================== CAR DATA ====================
import marutiSwift from "@/assets/cars/maruti-swift.jpg";
import marutiBaleno from "@/assets/cars/maruti-baleno.jpg";
import marutiErtiga from "@/assets/cars/maruti-ertiga.jpg";
import tataNexon from "@/assets/cars/tata-nexon.jpg";
import tataNexonEv from "@/assets/cars/tata-nexon-ev.jpg";
import tataHarrier from "@/assets/cars/tata-harrier.jpg";
import hyundaiI20 from "@/assets/cars/hyundai-i20.jpg";
import hyundaiVenue from "@/assets/cars/hyundai-venue.jpg";
import hyundaiCreta from "@/assets/cars/hyundai-creta.jpg";
import kiaSeltos from "@/assets/cars/kia-seltos.jpg";
import kiaSonet from "@/assets/cars/kia-sonet.jpg";
import mahindraThar from "@/assets/cars/mahindra-thar.jpg";
import mahindraXuv700 from "@/assets/cars/mahindra-xuv700.jpg";
import mgZsEv from "@/assets/cars/mg-zs-ev.jpg";
import hondaCity from "@/assets/cars/honda-city.jpg";
import hondaAmaze from "@/assets/cars/honda-amaze.jpg";
import toyotaFortuner from "@/assets/cars/toyota-fortuner.jpg";
import toyotaUrbanCruiser from "@/assets/cars/toyota-urban-cruiser.jpg";
import fordEndeavour from "@/assets/cars/ford-endeavour.jpg";
import skodaOctavia from "@/assets/cars/skoda-octavia.jpg";
import skodaRapid from "@/assets/cars/skoda-rapid.jpg";
import nissanKicks from "@/assets/cars/nissan-kicks.jpg";
import renaultDuster from "@/assets/cars/renault-duster.jpg";
import volkswagenPolo from "@/assets/cars/volkswagen-polo.jpg";
import audiA4 from "@/assets/cars/audi-a4.jpg";
import audiQ5 from "@/assets/cars/audi-q5.jpg";
import bmw3Series from "@/assets/cars/bmw-3-series.jpg";
import bmwX5 from "@/assets/cars/bmw-x5.jpg";
import mercedesCClass from "@/assets/cars/mercedes-c-class.jpg";
import mercedesGle from "@/assets/cars/mercedes-gle.jpg";
import volvoXc40 from "@/assets/cars/volvo-xc40.jpg";
import jaguarXf from "@/assets/cars/jaguar-xf.jpg";
import landRoverDefender from "@/assets/cars/land-rover-defender.jpg";
import jeepCompass from "@/assets/cars/jeep-compass.jpg";
import jeepWrangler from "@/assets/cars/jeep-wrangler.jpg";
import renaultKwid from "@/assets/cars/renault-kwid.jpg";
import fiatPunto from "@/assets/cars/fiat-punto.jpg";
import skodaKushaq from "@/assets/cars/skoda-kushaq.jpg";
import toyotaCamryHybrid from "@/assets/cars/toyota-camry-hybrid.jpg";
import hondaWrv from "@/assets/cars/honda-wrv.jpg";
import bmw7Series from "@/assets/cars/bmw-7-series.jpg";
import audiA6 from "@/assets/cars/audi-a6.jpg";
import mercedesSClass from "@/assets/cars/mercedes-s-class.jpg";
import teslaModel3 from "@/assets/cars/tesla-model-3.jpg";
import teslaModelS from "@/assets/cars/tesla-model-s.jpg";
import lexusEs from "@/assets/cars/lexus-es.jpg";
import porscheCayenne from "@/assets/cars/porsche-cayenne.jpg";
import audiQ7 from "@/assets/cars/audi-q7.jpg";
import bmw5Series from "@/assets/cars/bmw-5-series.jpg";
import mgHector from "@/assets/cars/mg-hector.jpg";
import renaultTriber from "@/assets/cars/renault-triber.jpg";
import nissanMagnite from "@/assets/cars/nissan-magnite.jpg";
import fordEcosport from "@/assets/cars/ford-ecosport.jpg";
import kiaCarnival from "@/assets/cars/kia-carnival.jpg";
import marutiAlto from "@/assets/cars/maruti-alto.jpg";
import audiRsQ8 from "@/assets/cars/audi-rs-q8.jpg";
import bmwZ4 from "@/assets/cars/bmw-z4.jpg";
import mercedesCla from "@/assets/cars/mercedes-cla.jpg";
import toyotaInnovaCrysta from "@/assets/cars/toyota-innova-crysta.jpg";
import skodaSuperb from "@/assets/cars/skoda-superb.jpg";

interface Car {
  id: number;
  brand: string;
  model: string;
  price: number;
  fuel: string;
  transmission: string;
}

const carImageMap: Record<number, string> = {
  1: marutiSwift, 2: marutiBaleno, 3: marutiErtiga, 4: tataNexon, 5: tataNexonEv,
  6: tataHarrier, 7: hyundaiI20, 8: hyundaiVenue, 9: hyundaiCreta, 10: kiaSeltos,
  11: kiaSonet, 12: mahindraThar, 13: mahindraXuv700, 14: mgZsEv, 15: hondaCity,
  16: hondaAmaze, 17: toyotaFortuner, 18: toyotaUrbanCruiser, 19: fordEndeavour, 20: skodaOctavia,
  21: skodaRapid, 22: nissanKicks, 23: renaultDuster, 24: volkswagenPolo, 25: audiA4,
  26: audiQ5, 27: bmw3Series, 28: bmwX5, 29: mercedesCClass, 30: mercedesGle,
  31: volvoXc40, 32: jaguarXf, 33: landRoverDefender, 34: jeepCompass, 35: jeepWrangler,
  36: renaultKwid, 37: fiatPunto, 38: skodaKushaq, 39: toyotaCamryHybrid, 40: hondaWrv,
  41: bmw7Series, 42: audiA6, 43: mercedesSClass, 44: teslaModel3, 45: teslaModelS,
  46: lexusEs, 47: porscheCayenne, 48: audiQ7, 49: bmw5Series, 50: mgHector,
  51: renaultTriber, 52: nissanMagnite, 53: fordEcosport, 54: kiaCarnival, 55: marutiAlto,
  56: audiRsQ8, 57: bmwZ4, 58: mercedesCla, 59: toyotaInnovaCrysta, 60: skodaSuperb,
};

const CARS: Car[] = [
  { id: 1, brand: "Maruti", model: "Swift", price: 650000, fuel: "Petrol", transmission: "Manual" },
  { id: 2, brand: "Maruti", model: "Baleno", price: 800000, fuel: "Petrol", transmission: "Automatic" },
  { id: 3, brand: "Maruti", model: "Ertiga", price: 1100000, fuel: "Petrol", transmission: "Manual" },
  { id: 4, brand: "Tata", model: "Nexon", price: 850000, fuel: "Petrol", transmission: "Manual" },
  { id: 5, brand: "Tata", model: "Nexon EV", price: 1500000, fuel: "Electric", transmission: "Automatic" },
  { id: 6, brand: "Tata", model: "Harrier", price: 1700000, fuel: "Diesel", transmission: "Automatic" },
  { id: 7, brand: "Hyundai", model: "i20", price: 900000, fuel: "Petrol", transmission: "Manual" },
  { id: 8, brand: "Hyundai", model: "Venue", price: 900000, fuel: "Petrol", transmission: "Automatic" },
  { id: 9, brand: "Hyundai", model: "Creta", price: 1500000, fuel: "Petrol", transmission: "Automatic" },
  { id: 10, brand: "Kia", model: "Seltos", price: 1600000, fuel: "Petrol", transmission: "Automatic" },
  { id: 11, brand: "Kia", model: "Sonet", price: 900000, fuel: "Petrol", transmission: "Manual" },
  { id: 12, brand: "Mahindra", model: "Thar", price: 1200000, fuel: "Petrol", transmission: "Manual" },
  { id: 13, brand: "Mahindra", model: "XUV700", price: 2000000, fuel: "Petrol", transmission: "Automatic" },
  { id: 14, brand: "MG", model: "ZS EV", price: 2000000, fuel: "Electric", transmission: "Automatic" },
  { id: 15, brand: "Honda", model: "City", price: 1400000, fuel: "Petrol", transmission: "Automatic" },
  { id: 16, brand: "Honda", model: "Amaze", price: 700000, fuel: "Petrol", transmission: "Manual" },
  { id: 17, brand: "Toyota", model: "Fortuner", price: 3500000, fuel: "Diesel", transmission: "Automatic" },
  { id: 18, brand: "Toyota", model: "Urban Cruiser", price: 900000, fuel: "Petrol", transmission: "Manual" },
  { id: 19, brand: "Ford", model: "Endeavour", price: 3200000, fuel: "Diesel", transmission: "Automatic" },
  { id: 20, brand: "Skoda", model: "Octavia", price: 2100000, fuel: "Petrol", transmission: "Automatic" },
  { id: 21, brand: "Skoda", model: "Rapid", price: 1100000, fuel: "Petrol", transmission: "Manual" },
  { id: 22, brand: "Nissan", model: "Kicks", price: 1400000, fuel: "Petrol", transmission: "Automatic" },
  { id: 23, brand: "Renault", model: "Duster", price: 1000000, fuel: "Diesel", transmission: "Manual" },
  { id: 24, brand: "Volkswagen", model: "Polo", price: 750000, fuel: "Petrol", transmission: "Manual" },
  { id: 25, brand: "Audi", model: "A4", price: 3800000, fuel: "Petrol", transmission: "Automatic" },
  { id: 26, brand: "Audi", model: "Q5", price: 5200000, fuel: "Diesel", transmission: "Automatic" },
  { id: 27, brand: "BMW", model: "3 Series", price: 4500000, fuel: "Petrol", transmission: "Automatic" },
  { id: 28, brand: "BMW", model: "X5", price: 9000000, fuel: "Diesel", transmission: "Automatic" },
  { id: 29, brand: "Mercedes", model: "C Class", price: 4200000, fuel: "Petrol", transmission: "Automatic" },
  { id: 30, brand: "Mercedes", model: "GLE", price: 9800000, fuel: "Diesel", transmission: "Automatic" },
  { id: 31, brand: "Volvo", model: "XC40", price: 4200000, fuel: "Petrol", transmission: "Automatic" },
  { id: 32, brand: "Jaguar", model: "XF", price: 6000000, fuel: "Petrol", transmission: "Automatic" },
  { id: 33, brand: "Land Rover", model: "Defender", price: 12000000, fuel: "Diesel", transmission: "Automatic" },
  { id: 34, brand: "Jeep", model: "Compass", price: 1800000, fuel: "Petrol", transmission: "Automatic" },
  { id: 35, brand: "Jeep", model: "Wrangler", price: 3500000, fuel: "Petrol", transmission: "Manual" },
  { id: 36, brand: "Renault", model: "Kwid", price: 400000, fuel: "Petrol", transmission: "Manual" },
  { id: 37, brand: "Fiat", model: "Punto", price: 650000, fuel: "Petrol", transmission: "Manual" },
  { id: 38, brand: "Skoda", model: "Kushaq", price: 1300000, fuel: "Petrol", transmission: "Manual" },
  { id: 39, brand: "Toyota", model: "Camry Hybrid", price: 4000000, fuel: "Hybrid", transmission: "Automatic" },
  { id: 40, brand: "Honda", model: "WR-V", price: 900000, fuel: "Petrol", transmission: "Manual" },
  { id: 41, brand: "BMW", model: "7 Series", price: 15000000, fuel: "Petrol", transmission: "Automatic" },
  { id: 42, brand: "Audi", model: "A6", price: 4800000, fuel: "Diesel", transmission: "Automatic" },
  { id: 43, brand: "Mercedes", model: "S Class", price: 25000000, fuel: "Petrol", transmission: "Automatic" },
  { id: 44, brand: "Tesla", model: "Model 3", price: 4500000, fuel: "Electric", transmission: "Automatic" },
  { id: 45, brand: "Tesla", model: "Model S", price: 12000000, fuel: "Electric", transmission: "Automatic" },
  { id: 46, brand: "Lexus", model: "ES", price: 7000000, fuel: "Petrol", transmission: "Automatic" },
  { id: 47, brand: "Porsche", model: "Cayenne", price: 18000000, fuel: "Petrol", transmission: "Automatic" },
  { id: 48, brand: "Audi", model: "Q7", price: 8500000, fuel: "Diesel", transmission: "Automatic" },
  { id: 49, brand: "BMW", model: "5 Series", price: 7000000, fuel: "Diesel", transmission: "Automatic" },
  { id: 50, brand: "MG", model: "Hector", price: 1350000, fuel: "Petrol", transmission: "Automatic" },
  { id: 51, brand: "Renault", model: "Triber", price: 600000, fuel: "Petrol", transmission: "Manual" },
  { id: 52, brand: "Nissan", model: "Magnite", price: 700000, fuel: "Petrol", transmission: "Manual" },
  { id: 53, brand: "Ford", model: "EcoSport", price: 950000, fuel: "Petrol", transmission: "Manual" },
  { id: 54, brand: "Kia", model: "Carnival", price: 2800000, fuel: "Diesel", transmission: "Automatic" },
  { id: 55, brand: "Maruti", model: "Alto", price: 350000, fuel: "Petrol", transmission: "Manual" },
  { id: 56, brand: "Audi", model: "RS Q8", price: 22000000, fuel: "Petrol", transmission: "Automatic" },
  { id: 57, brand: "BMW", model: "Z4", price: 9500000, fuel: "Petrol", transmission: "Automatic" },
  { id: 58, brand: "Mercedes", model: "CLA", price: 3400000, fuel: "Petrol", transmission: "Automatic" },
  { id: 59, brand: "Toyota", model: "Innova Crysta", price: 2000000, fuel: "Diesel", transmission: "Manual" },
  { id: 60, brand: "Skoda", model: "Superb", price: 2600000, fuel: "Petrol", transmission: "Automatic" },
];

const getImageUrl = (car: Car): string => {
  if (carImageMap[car.id]) return carImageMap[car.id];
  const query = encodeURIComponent(`${car.brand} ${car.model}`);
  return `https://source.unsplash.com/featured/800x500/?${query}`;
};

const formatPrice = (price: number): string => {
  return `₹${price.toLocaleString('en-IN')}`;
};

// ==================== COMPONENTS ====================

// SearchFilters Component
interface SearchFiltersProps {
  onSearch: (filters: SearchFiltersType) => void;
}

interface SearchFiltersType {
  maxPrice: number | null;
  fuel: string;
  transmission: string;
  brand: string;
}

const SearchFilters = ({ onSearch }: SearchFiltersProps) => {
  const [maxPrice, setMaxPrice] = useState("");
  const [fuel, setFuel] = useState("");
  const [transmission, setTransmission] = useState("");
  const [brand, setBrand] = useState("");

  const handleSearch = (e: React.FormEvent) => {
    e.preventDefault();
    onSearch({
      maxPrice: maxPrice ? parseInt(maxPrice) : null,
      fuel,
      transmission,
      brand,
    });
  };

  const handleReset = () => {
    setMaxPrice("");
    setFuel("");
    setTransmission("");
    setBrand("");
    onSearch({
      maxPrice: null,
      fuel: "",
      transmission: "",
      brand: "",
    });
  };

  return (
    <form onSubmit={handleSearch} className="w-full">
      <div className="bg-card border border-border rounded-xl p-6 backdrop-blur-sm shadow-lg">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
          <Input
            type="number"
            placeholder="Max Price (e.g. 1500000)"
            value={maxPrice}
            onChange={(e) => setMaxPrice(e.target.value)}
            className="bg-secondary border-border"
          />
          
          <Select value={fuel} onValueChange={setFuel}>
            <SelectTrigger className="bg-secondary border-border">
              <SelectValue placeholder="Fuel Type" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value=" ">All Fuel Types</SelectItem>
              <SelectItem value="Petrol">Petrol</SelectItem>
              <SelectItem value="Diesel">Diesel</SelectItem>
              <SelectItem value="Electric">Electric</SelectItem>
              <SelectItem value="Hybrid">Hybrid</SelectItem>
            </SelectContent>
          </Select>

          <Select value={transmission} onValueChange={setTransmission}>
            <SelectTrigger className="bg-secondary border-border">
              <SelectValue placeholder="Transmission" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value=" ">All Transmissions</SelectItem>
              <SelectItem value="Manual">Manual</SelectItem>
              <SelectItem value="Automatic">Automatic</SelectItem>
            </SelectContent>
          </Select>

          <Input
            type="text"
            placeholder="Brand (e.g. Maruti)"
            value={brand}
            onChange={(e) => setBrand(e.target.value)}
            className="bg-secondary border-border"
          />

          <div className="flex gap-2">
            <Button type="submit" className="flex-1 bg-primary hover:bg-primary/90 text-primary-foreground">
              <Search className="w-4 h-4 mr-2" />
              Search
            </Button>
            <Button type="button" variant="secondary" onClick={handleReset}>
              Reset
            </Button>
          </div>
        </div>
      </div>
    </form>
  );
};

// CarCard Component
interface CarCardProps {
  car: Car;
}

const CarCard = ({ car }: CarCardProps) => {
  const imageUrl = getImageUrl(car);
  const navigate = useNavigate();

  return (
    <Card 
      className="group overflow-hidden border-border bg-card hover:shadow-[var(--shadow-card)] transition-all duration-300 hover:-translate-y-1 cursor-pointer"
      onClick={() => navigate(`/car/${car.id}`)}
    >
      <div className="relative overflow-hidden aspect-video">
        <img
          src={imageUrl}
          alt={`${car.brand} ${car.model}`}
          className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
        />
        <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
      </div>
      
      <div className="p-5 space-y-3">
        <div>
          <h3 className="text-xl font-bold text-foreground">
            {car.brand} {car.model}
          </h3>
          <p className="text-2xl font-bold text-primary mt-1">
            {formatPrice(car.price)}
          </p>
        </div>
        
        <div className="flex items-center gap-4 text-sm text-muted-foreground">
          <div className="flex items-center gap-1.5">
            <Fuel className="w-4 h-4" />
            <span>{car.fuel}</span>
          </div>
          <div className="flex items-center gap-1.5">
            <Settings className="w-4 h-4" />
            <span>{car.transmission}</span>
          </div>
        </div>
      </div>
    </Card>
  );
};

// ==================== PAGES ====================

// Index Page
const Index = () => {
  const [showAll, setShowAll] = useState(false);
  const [filteredCars, setFilteredCars] = useState(CARS);
  const [isFiltering, setIsFiltering] = useState(false);

  const handleSearch = (filters: SearchFiltersType) => {
    setIsFiltering(
      filters.maxPrice !== null ||
      filters.fuel !== "" ||
      filters.transmission !== "" ||
      filters.brand !== ""
    );

    const results = CARS.filter((car) => {
      if (filters.maxPrice && car.price > filters.maxPrice) return false;
      if (filters.fuel && filters.fuel.trim() && car.fuel.toLowerCase() !== filters.fuel.toLowerCase()) return false;
      if (filters.transmission && filters.transmission.trim() && car.transmission.toLowerCase() !== filters.transmission.toLowerCase()) return false;
      if (filters.brand && filters.brand.trim() && !car.brand.toLowerCase().includes(filters.brand.toLowerCase().trim())) return false;
      return true;
    });

    setFilteredCars(results);
  };

  const displayedCars = isFiltering ? filteredCars : (showAll ? CARS : CARS.slice(0, 12));

  return (
    <div className="min-h-screen relative">
      <div 
        className="fixed inset-0 z-0 bg-cover bg-center bg-no-repeat"
        style={{
          backgroundImage: "url('https://thumbs.dreamstime.com/b/classic-vintage-cars-illustrated-grungy-retro-style-paper-backdrop-ample-copy-space-vintage-cars-retro-background-311900615.jpg')"
        }}
      />
      <div className="fixed inset-0 z-0 bg-black/45" />

      <section className="relative z-10 overflow-hidden border-b border-border/50">
        <div className="absolute inset-0 bg-gradient-to-b from-black/30 to-transparent" />
        
        <div className="relative container mx-auto px-4 py-16 md:py-24">
          <div className="text-center mb-12 animate-fade-in">
            <div className="inline-flex items-center gap-3 mb-6">
              <CarIcon className="w-12 h-12 text-primary" />
              <h1 className="text-5xl md:text-6xl font-bold text-foreground">
                Auto Genie
              </h1>
            </div>
            <p className="text-xl text-muted-foreground max-w-2xl mx-auto">
              Find your perfect car by budget, fuel type, transmission and brand
            </p>
          </div>

          <SearchFilters onSearch={handleSearch} />
        </div>
      </section>

      <section className="relative z-10 container mx-auto px-4 py-12">
        <div className="flex items-center justify-between mb-8">
          <div>
            <h2 className="text-3xl font-bold text-foreground">
              {isFiltering ? "Search Results" : showAll ? "All Cars" : "Featured Cars"}
            </h2>
            <p className="text-muted-foreground mt-1">
              {displayedCars.length} {displayedCars.length === 1 ? "car" : "cars"} available
            </p>
          </div>
          
          {!isFiltering && (
            <Button
              onClick={() => setShowAll(!showAll)}
              variant="outline"
              className="border-border hover:bg-secondary"
            >
              {showAll ? "Show Featured" : "View All Cars"}
            </Button>
          )}
        </div>

        {displayedCars.length === 0 ? (
          <div className="text-center py-20">
            <div className="inline-flex items-center justify-center w-20 h-20 rounded-full bg-secondary mb-4">
              <CarIcon className="w-10 h-10 text-muted-foreground" />
            </div>
            <h3 className="text-2xl font-bold text-foreground mb-2">No cars found</h3>
            <p className="text-muted-foreground">Try adjusting your search filters</p>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-fade-in">
            {displayedCars.map((car) => (
              <CarCard key={car.id} car={car} />
            ))}
          </div>
        )}
      </section>

      <footer className="relative z-10 border-t border-border/50 bg-black/60 backdrop-blur-sm mt-20">
        <div className="container mx-auto px-4 py-8 text-center text-muted-foreground">
          <p>Auto Genie — Your trusted car search platform</p>
          <p className="text-sm mt-2 opacity-70">
            Images are dynamically fetched from Unsplash to match each brand & model
          </p>
        </div>
      </footer>
    </div>
  );
};

// CarDetails Page
const CarDetails = () => {
  const { id } = useParams();
  const navigate = useNavigate();
  const car = CARS.find(c => c.id === Number(id));

  if (!car) {
    return (
      <div className="min-h-screen relative flex items-center justify-center">
        <div className="fixed inset-0 z-0 bg-cover bg-center bg-no-repeat" 
          style={{ backgroundImage: "url('https://thumbs.dreamstime.com/b/classic-vintage-cars-illustrated-grungy-retro-style-paper-backdrop-ample-copy-space-vintage-cars-retro-background-311900615.jpg')" }} 
        />
        <div className="fixed inset-0 z-0 bg-black/45" />
        <div className="relative z-10 text-center">
          <h1 className="text-4xl font-bold text-foreground mb-4">Car not found</h1>
          <Button onClick={() => navigate("/")} variant="default">
            <ArrowLeft className="mr-2 h-4 w-4" /> Back to Home
          </Button>
        </div>
      </div>
    );
  }

  const imageUrl = getImageUrl(car);

  return (
    <div className="min-h-screen relative">
      <div 
        className="fixed inset-0 z-0 bg-cover bg-center bg-no-repeat"
        style={{ backgroundImage: "url('https://thumbs.dreamstime.com/b/classic-vintage-cars-illustrated-grungy-retro-style-paper-backdrop-ample-copy-space-vintage-cars-retro-background-311900615.jpg')" }}
      />
      <div className="fixed inset-0 z-0 bg-black/45" />

      <div className="relative z-10 container mx-auto px-4 py-8">
        <Button 
          onClick={() => navigate("/")} 
          variant="outline" 
          className="mb-6 bg-black/40 backdrop-blur-sm border-white/20 text-white hover:bg-white/20"
        >
          <ArrowLeft className="mr-2 h-4 w-4" /> Back to Search
        </Button>

        <Card className="overflow-hidden bg-card/95 backdrop-blur-sm border-border shadow-[var(--shadow-glow)]">
          <div className="aspect-video w-full overflow-hidden">
            <img 
              src={imageUrl} 
              alt={`${car.brand} ${car.model}`}
              className="w-full h-full object-cover"
            />
          </div>

          <div className="p-8 md:p-12">
            <div className="mb-6">
              <h1 className="text-4xl md:text-5xl font-bold text-foreground mb-2">
                {car.brand} {car.model}
              </h1>
              <p className="text-5xl md:text-6xl font-bold text-primary">
                {formatPrice(car.price)}
              </p>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
              <div className="flex items-center gap-3 p-4 bg-muted/50 rounded-lg">
                <Fuel className="w-6 h-6 text-primary" />
                <div>
                  <p className="text-sm text-muted-foreground">Fuel Type</p>
                  <p className="text-lg font-semibold text-foreground">{car.fuel}</p>
                </div>
              </div>

              <div className="flex items-center gap-3 p-4 bg-muted/50 rounded-lg">
                <Settings className="w-6 h-6 text-primary" />
                <div>
                  <p className="text-sm text-muted-foreground">Transmission</p>
                  <p className="text-lg font-semibold text-foreground">{car.transmission}</p>
                </div>
              </div>
            </div>

            <div className="border-t border-border pt-8">
              <h2 className="text-2xl font-bold text-foreground mb-4">About this car</h2>
              <p className="text-muted-foreground leading-relaxed">
                The {car.brand} {car.model} is a {car.fuel.toLowerCase()}-powered vehicle with {car.transmission.toLowerCase()} transmission. 
                Priced at {formatPrice(car.price)}, this car offers excellent value and performance in its segment. 
                Perfect for those looking for a reliable and efficient vehicle.
              </p>
            </div>

            <div className="mt-8 flex gap-4">
              <Button size="lg" className="flex-1 bg-primary hover:bg-primary/90 text-primary-foreground">
                Contact Dealer
              </Button>
              <Button size="lg" variant="outline" className="flex-1 border-primary text-primary hover:bg-primary/10">
                Schedule Test Drive
              </Button>
            </div>
          </div>
        </Card>
      </div>
    </div>
  );
};

// NotFound Page
const NotFound = () => {
  const location = useLocation();

  useState(() => {
    console.error("404 Error: User attempted to access non-existent route:", location.pathname);
  });

  return (
    <div className="flex min-h-screen items-center justify-center bg-gray-100">
      <div className="text-center">
        <h1 className="mb-4 text-4xl font-bold">404</h1>
        <p className="mb-4 text-xl text-gray-600">Oops! Page not found</p>
        <a href="/" className="text-blue-500 underline hover:text-blue-700">
          Return to Home
        </a>
      </div>
    </div>
  );
};

// ==================== APP ====================

const queryClient = new QueryClient();

const App = () => (
  <QueryClientProvider client={queryClient}>
    <TooltipProvider>
      <Toaster />
      <Sonner />
      <BrowserRouter>
        <Routes>
          <Route path="/" element={<Index />} />
          <Route path="/car/:id" element={<CarDetails />} />
          <Route path="*" element={<NotFound />} />
        </Routes>
      </BrowserRouter>
    </TooltipProvider>
  </QueryClientProvider>
);

export default App;

// ==================== INITIALIZE ====================
// To use this file, replace the contents of src/main.tsx with:
// import { createRoot } from "react-dom/client";
// import App from "./AllInOne";
// import "./index.css";
// createRoot(document.getElementById("root")!).render(<App />);
